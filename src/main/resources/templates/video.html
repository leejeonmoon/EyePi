<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="base :: head"></head> <!-- base.html의 head 프래그먼트 명확히 참조 -->
<body>
<header th:replace="base :: header"></header> <!-- base.html의 header 프래그먼트 명확히 참조 -->

<div class="main-content">
    <h2>Start with oauth IP Cam <span th:text="${nickname}"></span></h2>

    <div class="buttons">
        <button id="move-video-btn">Move to my video</button>
        <button id="recorded-video-btn">Recorded video</button>
    </div>

    <main class="video-archive">
        <h2>Stored Videos</h2>

        <div class="date-selector">
            <p>Today's Date: <span id="current-date" th:text="${#dates.format(new java.util.Date(), 'yyyy-MM-dd')}"></span></p>
            <button id="select-date-btn" class="btn-mint">Select Date</button>
            <input type="text" id="date-picker" class="flatpickr-input" style="display: none;" readonly>
        </div>

        <div id="video-list" class="video-list">
            <!-- JavaScript로 날짜 선택 시 비디오 목록이 추가됨 -->
        </div>
    </main>
</div>

<div id="videoModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <video id="modalVideo" controls>
            <source src="" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
</div>

<script th:src="@{/js/oauth.js}"></script>
<script th:src="@{/js/token.js}"></script>
<script th:src="@{/js/modal.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script th:src="@{/js/video.js}"></script> <!-- video.js 추가 -->

<script>
    document.addEventListener("DOMContentLoaded", () => {
        // 페이지가 로드되었을 때 특정 요청을 보내려면 여기에 추가
        httpRequest('GET', '/authenticated', null, function(response) {
            console.log("성공 응답: " + response);
        });
    });
</script>

</body>
</html>
